<p>Audience: <span class="total">X</span></p>
<div class="users"></div>
<input class="username" type="username" value="p" placeholder="username"/>
<input class="room" type="room" value="123" placeholder="room"/>

<button type="button">Connect to audience-meter</button>
<script src="bower_components/event-source-polyfill/eventsource.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js"></script>
<script src="jquery.audience.js"></script>
<script>

var connect = function(username, room){
  var url = 'http://127.0.0.1/' + room + '?username=' + username;
  $.audience(url, username).progress(function(data){
    $('.total').text(data.count);
    if( data.usernames )
      $('.users').text(data.usernames.join(',') + ' joined !');
  });
};

var button = document.querySelector('button');
button.addEventListener('click', function(){
  connect( document.querySelector('.username').value, document.querySelector('.room').value )
});

</script>